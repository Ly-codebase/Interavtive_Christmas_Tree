(function(){if(self.crossOriginIsolated!=true){let W=self.location.origin,S="/coi-serviceworker.js",C=self.location.pathname.substring(0,self.location.pathname.lastIndexOf("/")),L=C+S,N="https://unpkg.com/coi-serviceworker@0.1.7/coi-serviceworker.min.js";function M(){if(self.navigator.serviceWorker&&self.navigator.serviceWorker.controller&&self.navigator.serviceWorker.controller.state=="activated"){const e=()=>{W===self.location.origin?self.location.reload():self.location.href=W};self.navigator.serviceWorker.addEventListener("controllerchange",e);return}}M();self.addEventListener("load",()=>{if(self.navigator.serviceWorker){let e=L;self.location.origin!=W&&(e=N);if(self.navigator.serviceWorker.controller){self.navigator.serviceWorker.controller.postMessage("coi-update");return}self.navigator.serviceWorker.register(e).then(M).catch(t=>{console.error("COOP/COEP Service Worker failed to register:",t)})}})})()
